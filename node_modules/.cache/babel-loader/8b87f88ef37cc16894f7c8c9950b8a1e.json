{"ast":null,"code":"import _defineProperty from\"C:/Users/moonh/Documents/GitHub/react-demo-app1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/moonh/Documents/GitHub/react-demo-app1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:/Users/moonh/Documents/GitHub/react-demo-app1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/moonh/Documents/GitHub/react-demo-app1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/moonh/Documents/GitHub/react-demo-app1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/moonh/Documents/GitHub/react-demo-app1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import Contents from'./contents';import{jsx as _jsx}from\"react/jsx-runtime\";var MainContents=/*#__PURE__*/function(_React$Component){_inherits(MainContents,_React$Component);var _super=_createSuper(MainContents);function MainContents(props){var _this;_classCallCheck(this,MainContents);_this=_super.call(this,props);_this.state={loading:false,param:{}};return _this;}_createClass(MainContents,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;//URLパラメータを文字列で取得(?含む)\nvar urlParamStr=window.location.search;if(urlParamStr){//?を除去\nurlParamStr=urlParamStr.substring(1);var params={};//urlパラメータをオブジェクトにまとめる\nurlParamStr.split('&').forEach(function(param){var temp=param.split('=');//pramsオブジェクトにパラメータを追加\nparams=_objectSpread(_objectSpread({},params),{},_defineProperty({},temp[0],temp[1]));});var tmp=this.state;this.setState(_objectSpread(_objectSpread({},tmp),{},{param:params}));}// 記事を取得\nvar key={headers:{'X-API-KEY':'9b30e206-4b28-4453-91f5-5d39d40d15a3'}};return fetch('https://ponsuke.microcms.io/api/v1/diary',key).then(function(response){return response.json();}).then(function(responseJson){var tmp=_this2.state;_this2.setState(_objectSpread(_objectSpread({},tmp),{},{loading:true,data:responseJson.contents}));console.log(responseJson);}).catch(function(error){console.error(error);});}},{key:\"renderContents\",value:function renderContents(i){var c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"\";return/*#__PURE__*/_jsx(Contents,{title:i.title,text:i.main,date:i.updatedAt,class:c+\" maincontent\",img:i.thumbnail.url},i.id);}},{key:\"render\",value:function render(){var _this3=this;if(this.state.loading){var p=this.state.param.p;console.log(this.state);var hoge=\"\";if(Math.sign(p))hoge=\"articleList\";return/*#__PURE__*/_jsx(\"div\",{id:\"main\",children:this.state.data.map(function(d){return _this3.renderContents(d,hoge);})});}else{return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})});}}}]);return MainContents;}(React.Component);export default MainContents;","map":{"version":3,"sources":["C:/Users/moonh/Documents/GitHub/react-demo-app1/src/MainContents.js"],"names":["React","Contents","MainContents","props","state","loading","param","urlParamStr","window","location","search","substring","params","split","forEach","temp","tmp","setState","key","headers","fetch","then","response","json","responseJson","data","contents","console","log","catch","error","i","c","title","main","updatedAt","thumbnail","url","id","p","hoge","Math","sign","map","d","renderContents","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Contents from './contents';\r\n\r\nclass MainContents extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            loading: false,\r\n            param: {}\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        //URLパラメータを文字列で取得(?含む)\r\n        let urlParamStr = window.location.search\r\n        if (urlParamStr) {\r\n            //?を除去\r\n            urlParamStr = urlParamStr.substring(1)\r\n            let params = {}\r\n            //urlパラメータをオブジェクトにまとめる\r\n            urlParamStr.split('&').forEach(param => {\r\n                const temp = param.split('=')\r\n                //pramsオブジェクトにパラメータを追加\r\n                params = {\r\n                    ...params,\r\n                    [temp[0]]: temp[1]\r\n                }\r\n            })\r\n            let tmp = this.state;\r\n            this.setState({\r\n                ...tmp,\r\n                param: params\r\n            })\r\n        }\r\n\r\n        // 記事を取得\r\n        const key = {\r\n            headers: { 'X-API-KEY': '9b30e206-4b28-4453-91f5-5d39d40d15a3' },\r\n        };\r\n        return fetch('https://ponsuke.microcms.io/api/v1/diary', key)\r\n            .then((response) => response.json())\r\n            .then((responseJson) => {\r\n                let tmp = this.state;\r\n                this.setState({\r\n                    ...tmp,\r\n                    loading: true,\r\n                    data: responseJson.contents,\r\n                });\r\n                console.log(responseJson)\r\n            })\r\n            .catch((error) => {\r\n                console.error(error);\r\n            });\r\n    }\r\n    renderContents(i, c = \"\") {\r\n        return <Contents\r\n            key={i.id}\r\n            title={i.title}\r\n            text={i.main}\r\n            date={i.updatedAt}\r\n            class={c + \" maincontent\"}\r\n            img={i.thumbnail.url}\r\n        />;\r\n    }\r\n\r\n    render() {\r\n        if (this.state.loading) {\r\n            let p = this.state.param.p;\r\n            console.log(this.state)\r\n            let hoge = \"\";\r\n            if (Math.sign(p)) hoge = \"articleList\";\r\n\r\n            return (\r\n                <div id=\"main\" >\r\n                    {this.state.data.map(d => {\r\n                        return this.renderContents(d, hoge)\r\n                    })}\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div>\r\n                    <p>Loading...</p>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default MainContents;"]},"metadata":{},"sourceType":"module"}